.model small
.stack 100h

.data
    ; 0 ???? 9 ??????? ??????? ???? ?????-???????? ?????????
    patterns db 3Fh, 06h, 5Bh, 4Fh, 66h, 6Dh, 7Dh, 07h, 7Fh, 6Fh
    
    ; ?? ???????? ????????? ?????? ???
    digit_to_show db 5
    
    ; --- ???? ???: ????????? ?????? ???? ???? ???? ???? ---
    device_path db 'LED_Display.exe', 0  ; ?? ??????????? ???? ???? ??? ??? ???
    param_block dw 0, 0, 0, 0            ; EXEC ??????? ???? ????????? ??????????? ????

.code
main proc
    ; ???? ???????? ??????????? ???
    mov ax, @data
    mov ds, ax

    ; --- ???? ???: LED ??????? ?????????????? ???? ??? ---
    call launch_device

    ; ????????? ?????? ??????? ???? ????????? ?? ???
    call display_digit

    ; ????????? ??? ???? ??? ???? ??-????? ????? ???? ??????? ???
    mov ah, 00h
    int 16h
    
    ; ????????? ???? ??? ????
    mov ah, 4Ch
    int 21h
main endp


; --- ???? ?????????: ????????? ?????? ???? ???? ???? ---
launch_device proc
    mov ax, @data
    mov es, ax              ; ES ??????????? ???? ?????????? ????????? ??? ???

    mov dx, offset device_path ; DX ? device_path ?? ????????? ??? ???
    mov bx, offset param_block ; BX ? ??????????? ?????? ????????? ??? ???
    
    mov ax, 4B00h           ; AH = 4Bh (EXEC ?????), AL = 0 (??? ??? ???)
    int 21h                 ; DOS ?? ?? ??? LED_Display.exe ???? ???
    
    ret
launch_device endp


; ???? ??? ?????? 7-???????? ????????? ??????? ???? ?????????
display_digit proc
    mov si, offset patterns
    
    xor bx, bx
    mov bl, digit_to_show
    add si, bx
    
    mov al, [si]
    
    mov dx, 199
    out dx, al
    
    mov dx, 200
    mov al, 0FEh
    out dx, al

    ret
display_digit endp

end main